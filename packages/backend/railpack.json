{
  "$schema": "https://schema.railpack.com",
  "language": "python",
  "build": {
    "commands": [
      "python -V",
      "python -m venv .venv",
      ".venv/bin/python -m pip install --upgrade pip setuptools wheel",
      ".venv/bin/python -m pip install poetry",
      ".venv/bin/poetry export -f requirements.txt --output requirements.txt --without-hashes",
      ".venv/bin/python -m pip install --no-cache-dir -r requirements.txt"
    ]
  },
  "deploy": {
    "startCommand": ".venv/bin/python -m alembic upgrade head || true && .venv/bin/python -m uvicorn main:app --host 0.0.0.0 --port $PORT"
  }
}
